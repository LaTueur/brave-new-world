rnw_set_development_level_effect = {
    every_$TIER$ = {
		limit = {
			is_titular = no
		}
		save_temporary_scope_value_as = {
			name = development_level
			value =  {
				integer_range = {
					min = $MIN$
					max = $MAX$
				}
			}
		}
        change_development_level = scope:development_level
    }
}
rnw_nullify_development_level_effect = {
    every_county = {
        change_development_level = {
            value = 0
            subtract = this.development_level
		}
	}
}
rnw_limit_development_level_effect = {
    every_county = {
        change_development_level = {
            value = development_level
			min = $MIN$
			max = $MAX$
			subtract = development_level
		}
	}
}
rnw_smooth_development_level_effect = {
	while = {
		count = $ROUNDS$
		every_county = {
			save_temporary_scope_as = checked_province
			set_variable = {
				name = development_level_influence
				value = {
					every_in_list = {
						variable = connected_titles
						add = development_level
					}
				}
			}
			set_variable = {
				name = development_level_influenecers
				value = {
					every_in_list = {
						variable = connected_titles
						add = 1
					}
				}
			}
			if = {
				limit = {
					trigger_if = {
						limit = {
							has_variable = development_level_influenecers
						}
						var:development_level_influenecers > 0
					}
					trigger_else = {
						always = no
					}
				}
				change_development_level = {
					add = var:development_level_influence
					divide = var:development_level_influenecers
					subtract = development_level
					divide = $IMPACT_DIVIDER$
					round = yes
				}
				remove_variable = development_level_influence
				remove_variable = development_level_influenecers
			}
		}
	}
}
rnw_holding_type_effect = {
	every_empire = {
        random_county_in_de_jure_hierarchy = {
			add_to_list = start_counties
		}
	}
	ordered_in_list = {
		list = start_counties
		order_by = development_level
		max = 6
		set_variable = {
			name = holding_type
			value = flag:castle_holding
		}
	}
	every_in_list = {
		list = start_counties
		limit = {
			NOT = { exists = var:holding_type }
		}
		set_variable = {
			name = holding_type
			value = flag:tribal_holding
		}
	}
	rnw_spread_holding_type_effect = yes
	rnw_flip_holding_type_effect = yes
}
rnw_spread_holding_type_effect = {
	while = {
		limit = {
			any_county = {
				NOT = { exists = var:holding_type }
			}
		}
		every_county = {
			limit = {
				NOT = { exists = var:holding_type }
				any_in_list = {
					variable = connected_titles
					exists = var:holding_type
				}
			}
			save_temporary_scope_as = choosing_county
			random_in_list = {
				variable = connected_titles
				limit = {
					exists = var:holding_type
				}
				scope:choosing_county = {
					set_variable = {
						name = holding_type
						value = prev.var:holding_type
					}
				}
			}
		}
	}
}
rnw_flip_holding_type_effect = {
	every_county = {
        limit = {
            exists = var:holding_type
        }
		if = {
			limit = {
				var:holding_type = flag:castle_holding
			}
			title_province = {
				if = {
					limit = {
						NOT = {
							has_holding_type = castle_holding
						}
					}
					set_holding_type = castle_holding
				}
				if = {
					limit = {
						this = barony.holder.capital_province
					}
					barony.holder = {
						change_government = feudal_government
					}
				}
			}
		}
		else = {
			title_province = {
				if = {
					limit = {
						NOT = {
							has_holding_type = tribal_holding
						}
					}
					set_holding_type = tribal_holding
				}
				if = {
					limit = {
						this = barony.holder.capital_province
					}
					barony.holder = {
						change_government = tribal_government
					}
				}
			}
		}
		remove_variable = holding_type
	}
}